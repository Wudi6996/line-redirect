<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>联系客服</title>

<!-- 防缓存 meta 标签 -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<style>
  body { font-family: Arial, sans-serif; text-align: center; background:#f7f7f7; margin:0; padding:0; color:#333; }
  header { background:#4CAF50; color:#fff; padding:15px 0; font-size:1.5rem; }
  .tip { margin:15px auto; font-size:1rem; max-width:500px; line-height:1.4; }
  .buttons { display:flex; flex-wrap:wrap; justify-content:center; gap:12px; padding:20px; }
  .buttons button { background:#4CAF50; color:#fff; border:none; padding:12px 20px; border-radius:8px; font-size:1rem; cursor:pointer; transition:background 0.3s; }
  .buttons button:hover { background:#45a049; }
  #tiktokTip { font-weight:bold; color:red; margin-top:10px; }
</style>
</head>
<body>
<header id="pageTitle">联系客服</header>
<p id="instruction" class="tip">点击下方按钮联系客服</p>

<div id="buttons" class="buttons"></div>
<!-- 提示文字始终可见 -->
<p id="tiktokTip">
  如果无法跳转，请点击右上角在浏览器中打开本页面
</p>

<script>
/* =========================
   客户客服配置区（显眼）
   每个客户最多15个客服槽位
========================= */

const customers = {};
for(let c=1;c<=10;c++){
  customers[c] = Array(15).fill("").map((_,i)=>({url:""}));
}

/* ======= 填写客服 URL ======= */
customers["1"][0].url = "https://line.me/ti/p/BkkXAMg2Uy"; // 客服1
customers["2"][0].url = "https://line.me/ti/p/BBBB1111"; // 客服1
/* =========================
   以下代码无需修改
========================= */

const translations = {
  zh: { title:"联系客服", instruction:"点击下方按钮联系客服", tiktokTip:"如果无法跳转，请点击右上角在浏览器中打开本页面", buttonLabel:(n)=>`${n}号客服` },
  en: { title:"Contact Service", instruction:"Click a button below to contact service", tiktokTip:"If it doesn't open, please tap top-right menu and choose 'Open in browser'.", buttonLabel:(n)=>`CS ${n}` },
  ja: { title:"カスタマーサポートへ連絡", instruction:"下のボタンをクリックしてカスタマーサポートに連絡", tiktokTip:"開けない場合は右上のメニューからブラウザで開いてください。", buttonLabel:(n)=>`${n}号カスタマー` },
  ko: { title:"고객센터 문의", instruction:"아래 버튼을 눌러 고객센터에 문의하세요", tiktokTip:"열리지 않으면 오른쪽 상단 메뉴에서 브라우저로 열기를 선택하세요.", buttonLabel:(n)=>`${n}번 고객센터` },
  pt: { title:"Atendimento ao Cliente", instruction:"Clique no botão abaixo para falar com o atendimento", tiktokTip:"Se não abrir, toque no menu no canto superior direito e escolha 'Abrir no navegador'.", buttonLabel:(n)=>`Atendimento ${n}` },
  fr: { title:"Contacter le service client", instruction:"Cliquez sur un bouton ci-dessous pour contacter le service", tiktokTip:"S’il ne s’ouvre pas, cliquez sur le menu en haut à droite et choisissez « Ouvrir dans le navigateur ».", buttonLabel:(n)=>`Service ${n}` }
};

const userLang = (navigator.language||"en").slice(0,2);
const lang = translations[userLang]?userLang:"en";

document.getElementById("pageTitle").innerText = translations[lang].title;
document.getElementById("instruction").innerText = translations[lang].instruction;

// 获取 URL 参数 ?c=客户编号
const params = new URLSearchParams(window.location.search);
const customerId = params.get("c") || "1";
const accounts = customers[customerId] || [];

// 渲染按钮（只显示有URL的）
const btnContainer=document.getElementById("buttons");
accounts.forEach((acc,index)=>{
  if(acc.url){
    const btn=document.createElement("button");
    btn.innerText=translations[lang].buttonLabel(index+1);
    // 防缓存：每次点击都加时间戳参数
    btn.onclick = () => {
      const url = acc.url + (acc.url.includes('?') ? '&' : '?') + 't=' + new Date().getTime();
      window.location.href = url;
    };
    btnContainer.appendChild(btn);
  }
});

if(btnContainer.children.length===0){
  const p=document.createElement("p");
  p.innerText="当前没有客服账号。";
  btnContainer.appendChild(p);
}
</script>
</body>
</html>
